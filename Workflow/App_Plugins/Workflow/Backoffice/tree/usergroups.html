<div class="umb-panel workflow" ng-controller="Workflow.UserGroups.Dashboard.Controller">

    <umb-load-indicator ng-if="loading"></umb-load-indicator>

    <form ng-show="!loading" class="umb-dashboard" novalidate="">

        <umb-editor-view footer="false" umb-tabs>

            <umb-editor-header name="name"
                               name-locked="true"
                               tabs=""
                               hide-icon="true"
                               hide-description="true"
                               hide-alias="true">
            </umb-editor-header>

            <umb-editor-container>

                <umb-editor-sub-header>
                    <umb-editor-sub-header-left>
                        <a class="btn" href="#" ng-click="addGroupDialog()">
                            <localize key="actions_create">Create</localize>
                        </a>
                    </umb-editor-sub-header-left>
                    <umb-editor-sub-header-content-right>
                        <div class="form-search pull-right ng-pristine ng-valid">
                            <div class="inner-addon left-addon">
                                <i class="icon icon-search"></i>
                                <input type="text" class="form-control ng-pristine ng-valid" localize="placeholder" placeholder="Type to search..." ng-model="search.$" prevent-enter-submit="" no-dirty-check="">
                            </div>
                        </div>
                    </umb-editor-sub-header-content-right>
                </umb-editor-sub-header>

                <div>
                    <div class="umb-table" ng-if="items">
                        <div class="umb-table-head">
                            <div class="umb-table-row">
                                <div class="umb-table-cell">
                                    <input class="umb-table__input" type="checkbox"
                                           ng-click="selectAll($event)"
                                           ng-checked="isSelectedAll()">
                                </div>
                                <div class="umb-table-cell umb-table__name">
                                    <a class="umb-table-head__link sortable" href="#" ng-click="sort('Name', true, true)" prevent-default>
                                        <localize key="general_name">Name</localize>
                                    </a>
                                </div>
                                <div class="umb-table-cell">
                                    <a class="umb-table-head__link" href="#" prevent-default>
                                        Members
                                    </a>
                                </div>
                                <div class="umb-table-cell">
                                    <a class="umb-table-head__link" href="#" prevent-default>
                                        Permissions
                                    </a>
                                </div>
                                <div class="umb-table-cell">
                                    <a class="umb-table-head__link" href="#" prevent-default>
                                        Group email
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="umb-table-body">
                            <div class="umb-table-row"
                                 ng-repeat="item in pagedItems | filter:search" emit-last-repeater-element>

                                <div class="umb-table-cell">
                                    <i class="umb-table-body__icon icon-users"></i>
                                </div>
                                <div class="umb-table-cell umb-table__name">
                                    <a class="umb-table-body__link" ng-href="#/workflow/tree/edit/{{ item.GroupId }}" title="Edit group: {{ item.Name }}">{{ item.Name }}</a>
                                </div>
                                <div class="umb-table-cell">
                                    <ul>
                                        <li ng-repeat="user in item.Users">
                                            <a ng-href="#/users/users/edit/{{ user.Id }}" title="Edit user: {{ user.Name }}">{{ user.Name }}</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="umb-table-cell">
                                    <ul>
                                        <li ng-repeat="perm in item.Permissions">
                                            <a ng-href="#/content/content/edit/{{ perm.NodeId }}" title="Edit node: {{ perm.NodeName }}">{{ perm.NodeName}} ({{ perm.Permission }})</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="umb-table-cell">
                                    <a ng-href="mailto:{{ getEmail(item.Users) }}"><span class="icon icon-inbox" title="Email group"></span></a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flex justify-center">
                        <wf-paging-controls></wf-paging-controls>
                    </div>

                    <umb-empty-state ng-if="!items" position="center">
                        <localize key="content_listViewNoItems">There are no items show in the list.</localize>
                    </umb-empty-state>
            
                </div>
            </umb-editor-container>
        </umb-editor-view>
    </form>﻿
</div>